<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NVDAON - ONDO Finance</title>

  <!-- Fonts + Charts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

  <style>
    /* ========== RESET / BASE ========== */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { max-width: 100%; overflow-x: hidden; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #FFFFFF;
      color: #1A1A1A;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* ========== HEADER ========== */
    header {
      background: #FFFFFF;
      border-bottom: 1px solid #E5E7EB;
      position: sticky; top: 0; z-index: 100;
    }
    .header-container {
      max-width: 1400px; margin: 0 auto;
      padding: 0 48px; height: 80px;
      display: flex; align-items: center; justify-content: space-between;
    }
    .logo { display: flex; align-items: center; gap: 14px; font-size: 24px; font-weight: 700; color: #000; cursor: pointer; transition: opacity .2s; }
    .logo:hover { opacity: .8; }
    .logo-circle { width: 40px; height: 40px; background: #000; border-radius: 12px; color: #fff; display: grid; place-items: center; font-weight: 700; font-size: 20px; }
    .nav { display: flex; align-items: center; gap: 32px; }
    .nav a { color: #6B7280; text-decoration: none; font-size: 15px; font-weight: 500; transition: color .2s; }
    .nav a:hover { color: #000; }
    .btn-wallet { background: #000; color: #fff; border: 0; padding: 12px 24px; border-radius: 12px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all .2s; }
    .btn-wallet:hover { background:#333; transform: translateY(-1px); }
    .btn-wallet.connected { background:#10B981; }

    /* ========== LAYOUT ========== */
    .main-container {
      max-width: 1400px; margin: 0 auto;
      padding: 48px 48px 80px;
      display: grid; align-items: start; gap: 48px;
      grid-template-columns: minmax(0, 1fr) clamp(320px, 32vw, 420px);
      overflow-x: clip;
    }
    .info-pane,
    .trading-pane,
    .section-block,
    .stats-grid,
    .chart-container,
    .footer-disclaimer,
    .footer-bottom-container { min-width: 0; }

    .info-pane {
      background: #FFFFFF;
      border-radius: 20px;
      padding: 32px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    .trading-pane {
      position: sticky; top: 96px;
      align-self: start;
    }

    /* ========== TOKEN HEADER ========== */
    .token-header {
      display: flex; align-items: center; gap: 16px;
      padding-bottom: 24px; margin-bottom: 24px;
      border-bottom: 1px solid #F3F4F6;
    }
    .token-logo {
      width: 56px; height: 56px; border-radius: 14px;
      background: #76B900; color: #fff; display: grid; place-items: center;
      font-weight: 800; font-size: 28px;
    }
    .token-info h1 { font-size: 28px; font-weight: 800; color: #000; }
    .token-info p { color: #6B7280; font-size: 14px; }

    /* ========== PRICE ========== */
    .price-section { display: flex; align-items: baseline; gap: 16px; margin-bottom: 20px; }
    .current-price { font-size: 44px; font-weight: 800; color: #000; }
    .price-change { font-size: 14px; font-weight: 700; color: #10B981; }

    /* ========== CHART ========== */
    .chart-section { margin-top: 8px; }
    .chart-controls {
      display: flex; gap: 8px; margin-bottom: 16px; flex-wrap: wrap;
    }
    .chart-btn {
      background: #F3F4F6; border: none; padding: 8px 14px; border-radius: 8px;
      font-size: 12px; font-weight: 700; color: #6B7280; cursor: pointer; transition: all .2s;
    }
    .chart-btn:hover { background: #E5E7EB; color: #000; }
    .chart-btn.active { background: #000; color: #fff; }

    .chart-container {
      background: #FAFAFA; border-radius: 16px; padding: 20px; height: 320px; position: relative;
      max-width: 100%;
    }
    .chart-container canvas { display: block; width: 100% !important; height: 100% !important; }

    /* ========== STATS ========== */
    .stats-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px; margin: 24px 0 40px;
    }
    .stat-card { background: #F9FAFB; padding: 24px; border-radius: 12px; transition: all .2s; }
    .stat-card:hover { background: #F3F4F6; transform: translateY(-2px); }
    .stat-label { color: #6B7280; font-size: 13px; font-weight: 500; margin-bottom: 8px; display: block; }
    .stat-value { color: #000; font-size: 22px; font-weight: 800; }
    .stat-subvalue { color: #9CA3AF; font-size: 13px; margin-top: 4px; }

    /* ========== SECTIONS ========== */
    .section-block { margin-bottom: 40px; padding-bottom: 40px; border-bottom: 1px solid #F3F4F6; }
    .section-block:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    .section-block h2 { font-size: 24px; font-weight: 800; color: #000; margin-bottom: 20px; }
    .section-block h3 { font-size: 18px; font-weight: 700; color: #000; margin: 28px 0 16px; }
    .section-block p, .section-block li { color: #4B5563; font-size: 15px; line-height: 1.7; }
    .section-block ul { margin: 0 0 16px 20px; }

    .info-row { display: flex; justify-content: space-between; align-items: center; padding: 16px 0; border-bottom: 1px solid #F3F4F6; }
    .info-row:last-child { border-bottom: none; }
    .info-label { color: #6B7280; font-size: 14px; font-weight: 600; display: flex; align-items: center; gap: 8px; }
    .info-value { color: #000; font-size: 15px; font-weight: 700; text-align: right; }
    .badge { background:#F3F4F6; color:#111827; padding:6px 10px; border-radius:8px; font-size:12px; font-weight:700; }

    /* ========== TRADING WIDGET ========== */
    .trading-widget { background: #FFFFFF; border-radius: 16px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }
    .trade-tabs { display: flex; gap: 8px; background:#F3F4F6; padding: 6px; border-radius: 12px; margin-bottom: 14px; }
    .trade-tab { flex: 1; background: transparent; border: none; padding: 10px 16px; border-radius: 10px; font-size: 14px; font-weight: 700; color: #6B7280; cursor: pointer; transition: all .2s; }
    .trade-tab.active { background: white; color: #000; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .trade-box { background: #F9FAFB; padding: 16px; border-radius: 12px; margin-bottom: 12px; position: relative; }
    .trade-label { color: #6B7280; font-size: 13px; font-weight: 600; margin-bottom: 8px; display: block; }
    .trade-input-wrapper { display: flex; align-items: center; gap: 12px; position: relative; }
    .trade-input { flex: 1; background: transparent; border: none; font-size: 24px; font-weight: 800; color: #000; outline: none; }
    .trade-input::placeholder { color: #D1D5DB; }
    .currency-badge {
      position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
      background: #FFFFFF; border: 1px solid #E5E7EB; border-radius: 8px; padding: 6px 10px;
      font-size: 13px; font-weight: 700; color: #000; display: inline-flex; align-items: center; gap: 8px; pointer-events: none;
    }
    .currency-icon {
      width: 18px; height: 18px; border-radius: 50%;
      display: inline-flex; align-items: center; justify-content: center;
      font-size: 11px; font-weight: 800; color: #fff; background: #9CA3AF;
    }
    .currency-icon.usdc { background: #2775CA; }
    .currency-icon.nvda { background: #76B900; }

    .trade-input { padding-right: 96px; }
    .swap-arrow { text-align: center; font-weight: 800; color: #6B7280; margin: 10px 0; position: relative; z-index: 0; }
    .summary-row { display: flex; justify-content: space-between; font-size: 13px; color: #6B7280; margin: 8px 2px 14px; }
    .btn-trade { width: 100%; background:#000; color:#fff; border: none; padding: 16px; border-radius: 12px; font-size: 15px; font-weight: 800; cursor: pointer; transition: all .2s; }
    .btn-trade:hover { background:#111827; transform: translateY(-1px); }
    .btn-trade:disabled { background:#9CA3AF; cursor: not-allowed; transform: none; }
    .disclaimer { color:#6B7280; font-size: 12px; line-height: 1.6; margin-top: 12px; }

    /* ========== FOOTER ========== */
    .footer-disclaimer {
      display: grid; grid-template-columns: 1fr 1fr; gap: 32px;
      background: #FFFFFF; margin: 40px 0 0; padding: 40px; border-top: 1px solid #F3F4F6;
    }
    .disclaimer-block h4 { font-size: 14px; font-weight: 800; color: #111827; margin-bottom: 8px; }
    .disclaimer-block p { color:#6B7280; font-size: 12px; line-height: 1.7; margin-bottom: 10px; }

    .footer-bottom { background:#fff; border-top:1px solid #F3F4F6; }
    .footer-bottom-container {
      max-width: 1400px; margin: 0 auto; padding: 20px 48px;
      display: flex; align-items: center; justify-content: space-between; gap: 24px;
    }
    .footer-left { display: flex; align-items: center; gap: 24px; }
    .footer-logo { font-weight: 900; letter-spacing: .5px; }
    .footer-links { display: flex; gap: 24px; flex-wrap: wrap; }
    .footer-links a { color:#6B7280; text-decoration:none; font-size:13px; font-weight:600; }
    .footer-links a:hover { color:#000; }
    .footer-socials { display:flex; gap:12px; }
    .social-icon { width:36px; height:36px; border-radius:50%; background:#F3F4F6; display:grid; place-items:center; color:#6B7280; text-decoration:none; font-size:16px; transition:.2s; }
    .social-icon:hover { background:#000; color:#fff; transform: translateY(-2px); }

    /* ========== MOBILE RELOCATOR HELPERS ========== */
    #mobileTradeSlot { margin-bottom: 16px; }
    @media (max-width: 1200px) {
      body.trade-moved .trading-pane { display: none; } /* on masque la colonne droite quand on a d√©plac√© le widget */
    }

    /* ========== RESPONSIVE BREAKPOINTS ========== */
    @media (max-width: 1200px) {
      .main-container { grid-template-columns: 1fr; padding: 32px 24px; }
      .trading-pane { position: static; margin-top: 0; }
      .stats-grid { grid-template-columns: repeat(2, 1fr); }
      .header-container { padding: 0 24px; height: 72px; }
    }
    @media (max-width: 768px) {
      .current-price { font-size: 36px; }
      .chart-container { height: 260px; padding: 14px; }
      .chart-btn { padding: 6px 10px; font-size: 11px; }
      .trade-input { font-size: 20px; }
      .btn-trade { padding: 14px; font-size: 14px; }
      .footer-disclaimer { grid-template-columns: 1fr; gap: 24px; padding: 28px 20px; }
    }
    @media (max-width: 480px) {
      .header-container { height: 60px; padding: 0 16px; }
      .logo { font-size: 18px; gap: 8px; }
      .logo-circle { width: 32px; height: 32px; font-size: 16px; }
      .nav { gap: 12px; }
      .btn-wallet { padding: 8px 16px; font-size: 12px; }
      .main-container { padding: 20px 12px; gap: 20px; }
      .info-pane { padding: 20px; }
      .token-header { margin-bottom: 20px; padding-bottom: 20px; }
      .token-logo { width: 48px; height: 48px; font-size: 24px; }
      .token-info h1 { font-size: 24px; }
      .current-price { font-size: 32px; }
      .chart-container { height: 220px; padding: 12px; }
      .trade-box { padding: 12px; }
      .trade-input { font-size: 18px; }
      .btn-trade { padding: 12px; font-size: 13px; }
      .footer-links a, .disclaimer-block { font-size: 11px; }
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="header-container">
      <div class="logo">
        <div class="logo-circle">@</div>
        ONDO
      </div>
      <nav class="nav">
        <a href="#explore">Explore</a>
        <a href="#tools">Tools</a>
        <a href="#learn">Learn</a>
        <button class="btn-wallet" id="walletBtn">Connect Wallet</button>
      </nav>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="main-container">

    <!-- LEFT: INFO PANE -->
    <div class="info-pane">

      <!-- Token Header -->
      <div class="token-header">
        <div class="token-logo">N</div>
        <div class="token-info">
          <h1>NVIDIA</h1>
          <p>NVDAon</p>
        </div>
      </div>

      <!-- Price -->
      <div class="price-section">
        <div class="current-price">$195.90</div>
        <div class="price-change">‚ñ≤ $9.81 (4.17%) 24H</div>
      </div>

      <!-- Mobile injection point for Trading Widget (will be filled by JS) -->
      <div id="mobileTradeSlot"></div>

      <!-- Chart -->
      <div class="chart-section">
        <div class="chart-controls">
          <button class="chart-btn" data-range="1D">1D</button>
          <button class="chart-btn" data-range="1W">1W</button>
          <button class="chart-btn" data-range="1M">1M</button>
          <button class="chart-btn" data-range="3M">3M</button>
          <button class="chart-btn active" data-range="1Y">1Y</button>
          <button class="chart-btn" data-range="ALL">ALL</button>
        </div>
        <div class="chart-container">
          <canvas id="priceChart"></canvas>
        </div>
      </div>

      <!-- Stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <span class="stat-label">Market Cap</span>
          <div class="stat-value">$1.19T</div>
          <div class="stat-subvalue">Fully Diluted</div>
        </div>
        <div class="stat-card">
          <span class="stat-label">24h Volume</span>
          <div class="stat-value">$5.4B</div>
          <div class="stat-subvalue">Spot + Derivatives</div>
        </div>
        <div class="stat-card">
          <span class="stat-label">Circulating Supply</span>
          <div class="stat-value">2.47B</div>
          <div class="stat-subvalue">NVDAon tokens</div>
        </div>
      </div>

      <!-- About Section -->
      <div class="section-block">
        <h2>About</h2>
        <p>
          NVIDIA Corporation provides graphics, compute, and networking solutions globally. The Graphics segment offers GeForce GPUs, GeForce NOW cloud gaming, RTX for enterprise workstations, vGPU software, automotive infotainment, and Omniverse.
        </p>
        <p>
          Its Compute & Networking segment provides data center platforms for AI/HPC, Mellanox networking, automotive autonomous driving solutions, Jetson for robotics/edge, and NVIDIA AI Enterprise software.
        </p>
        <p>
          Products serve gaming, professional visualization, data center, and automotive markets. Customers include OEMs/ODMs, system builders, retailers/distributors, ISVs, cloud providers, auto OEMs/tier-1s, and broader ecosystem partners.
        </p>
        <p>
          Incorporated in 1993, headquartered in Santa Clara, California.
        </p>
      </div>

      <!-- More Info -->
      <div class="section-block">
        <h2>More Information</h2>
        <div class="info-row">
          <span class="info-label">Category</span>
          <div class="info-value">
            <span class="badge">Equities</span>
            <span class="badge">Stock</span>
          </div>
        </div>
        <div class="info-row">
          <span class="info-label">Shares Per Token</span>
          <span class="info-value">1 NVDAon = 1.00 NVDA</span>
        </div>

        <h3>What is a Tokenized Stock?</h3>
        <p>
          Tokenized stocks are blockchain-based tokens representing shares of publicly traded companies. Each token is backed 1:1 by actual shares held by regulated custodians.
        </p>

        <h3>Key Benefits</h3>
        <ul>
          <li><strong>24/7 Trading:</strong> Trade anytime, not only market hours.</li>
          <li><strong>Fractional Ownership:</strong> Buy portions of expensive stocks.</li>
          <li><strong>Instant Settlement:</strong> Near-instant finality on-chain.</li>
          <li><strong>Global Access:</strong> Internet connection is enough.</li>
          <li><strong>Transparency:</strong> On-chain history.</li>
        </ul>

        <h3>How It Works</h3>
        <p>
          When you purchase NVDAon, regulated broker-dealers purchase equivalent NVIDIA shares on traditional exchanges. Shares are locked in custody and can only be released by burning the corresponding tokens.
        </p>

        <h3>Regulatory Compliance</h3>
        <p>
          NVDAon tokens comply with applicable securities laws. Underlying shares are held by licensed custodians. Token holders retain economic benefits, including potential dividends and price appreciation.
        </p>

        <h3>Risks</h3>
        <p>
          Market volatility, smart contract risk, regulatory changes, and custodian risk. Not FDIC insured; you may lose value.
        </p>
      </div>
    </div>

    <!-- RIGHT: TRADING PANE -->
    <div class="trading-pane">
      <div class="trading-widget" id="tradingWidget">
        <!-- Tabs -->
        <div class="trade-tabs">
          <button class="trade-tab active" id="buyTab">Buy</button>
          <button class="trade-tab" id="sellTab">Sell</button>
        </div>

        <!-- Buy Panel -->
        <div id="buyPanel">
          <div class="trade-box">
            <label class="trade-label">Pay</label>
            <div class="trade-input-wrapper">
              <input type="number" class="trade-input" placeholder="0" id="payAmount" min="0" step="any">
              <div class="currency-badge">
                <div class="currency-icon usdc">S</div>
                USDC
              </div>
            </div>
          </div>

          <div class="swap-arrow">‚Üì</div>

          <div class="trade-box">
            <label class="trade-label">Receive</label>
            <div class="trade-input-wrapper">
              <input type="text" class="trade-input" placeholder="0" id="receiveAmount" readonly>
              <div class="currency-badge">
                <div class="currency-icon nvda">N</div>
                NVDAon
              </div>
            </div>
          </div>

          <div class="summary-row">
            <span>Price</span>
            <span id="pricePerToken">$195.90 / NVDAon</span>
          </div>

          <button class="btn-trade" id="buyBtn" disabled>CONNECT WALLET</button>

          <div class="disclaimer">
            Global Markets tokens have not been registered under the US Securities Act of 1933, as amended, or other jurisdictions, and may not be offered or sold in the United States or to US persons unless registered or exempt. Restrictions may apply. See additional information here.
          </div>
        </div>

        <!-- Sell Panel (hidden by default) -->
        <div id="sellPanel" style="display:none;">
          <div class="trade-box">
            <label class="trade-label">Sell</label>
            <div class="trade-input-wrapper">
              <input type="number" class="trade-input" placeholder="0" id="sellAmount" min="0" step="any">
              <div class="currency-badge">
                <div class="currency-icon nvda">N</div>
                NVDAon
              </div>
            </div>
          </div>

          <div class="swap-arrow">‚Üì</div>

          <div class="trade-box">
            <label class="trade-label">You receive</label>
            <div class="trade-input-wrapper">
              <input type="text" class="trade-input" placeholder="0" id="sellReceiveAmount" readonly>
              <div class="currency-badge">
                <div class="currency-icon usdc">S</div>
                USDC
              </div>
            </div>
          </div>

          <div class="summary-row">
            <span>Price</span>
            <span id="pricePerTokenSell">$195.90 / NVDAon</span>
          </div>

          <button class="btn-trade" id="sellBtn" disabled>CONNECT WALLET</button>

          <div class="disclaimer">
            Trading digital assets involves risk and may result in loss of value. Not FDIC/SIPC insured.
          </div>
        </div>
      </div>
      <!-- Desktop slot marker (will be created by JS if not present) -->
    </div>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="footer-disclaimer">
      <div class="disclaimer-block">
        <h4>Important Information</h4>
        <p>
          The tokens offered on this platform have not been registered under the US Securities Act of 1933, as amended, or the securities laws of any other jurisdiction, and may not be offered or sold in the United States or to US persons unless registered or exempt.
        </p>
        <p>
          Products are not available where prohibited by applicable law. By accessing this platform, you acknowledge you are not a US person and comply with your local laws.
        </p>
      </div>
      <div class="disclaimer-block">
        <h4>Risk Disclosure</h4>
        <p>
          Digital assets and tokenized securities involve substantial risk of loss and are not suitable for all investors. Values can be highly volatile and unpredictable.
        </p>
        <p>
          Past performance is not indicative of future results. Not insured by FDIC, SIPC, or any other insurance. You may lose some or all of your investment.
        </p>
      </div>
    </div>
    <div class="footer-bottom">
      <div class="footer-bottom-container">
        <div class="footer-left">
          <div class="footer-logo">ONDO</div>
          <div class="footer-links">
            <a href="#">Terms of Service</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Risk Disclosure</a>
            <a href="#">Contact</a>
          </div>
        </div>
        <div class="footer-socials">
          <a href="#" class="social-icon">ùïè</a>
          <a href="#" class="social-icon">üí¨</a>
          <a href="#" class="social-icon">üì±</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // ===== STATE =====
    const state = {
      connected: false,
      tokenPrice: 195.90
    };

    // ===== ELEMENTS =====
    const els = {
      walletBtn: document.getElementById('walletBtn'),
      buyTab: document.getElementById('buyTab'),
      sellTab: document.getElementById('sellTab'),
      buyPanel: document.getElementById('buyPanel'),
      sellPanel: document.getElementById('sellPanel'),
      payAmount: document.getElementById('payAmount'),
      receiveAmount: document.getElementById('receiveAmount'),
      sellAmount: document.getElementById('sellAmount'),
      sellReceiveAmount: document.getElementById('sellReceiveAmount'),
      buyBtn: document.getElementById('buyBtn'),
      sellBtn: document.getElementById('sellBtn'),
      pricePerToken: document.getElementById('pricePerToken'),
      pricePerTokenSell: document.getElementById('pricePerTokenSell')
    };

    // ===== CHART =====
    const ctx = document.getElementById('priceChart').getContext('2d');

    function generateData(days = 365, startPrice = 120) {
      const data = [];
      const now = Date.now();
      const oneDay = 24 * 60 * 60 * 1000;
      let price = startPrice;

      for (let i = 0; i < days; i++) {
        const t = now - (days - i) * oneDay;
        price += (Math.random() - 0.45) * 5;
        data.push({ x: t, y: Math.max(price, 80) });
      }
      return data;
    }

    const chartData = {
      '1D': generateData(24, 190),
      '1W': generateData(7, 185),
      '1M': generateData(30, 180),
      '3M': generateData(90, 170),
      '1Y': generateData(365, 150),
      'ALL': generateData(365 * 3, 120)
    };

    const priceChart = new Chart(ctx, {
      type: 'line',
      data: {
        datasets: [{
          label: 'NVDAon',
          data: chartData['1Y'],
          borderColor: '#111827',
          backgroundColor: 'rgba(17,24,39,0.08)',
          pointRadius: 0,
          tension: 0.25,
          fill: true
        }]
      },
      options: {
        parsing: false,
        responsive: true,
        maintainAspectRatio: false,
        interaction: { mode: 'index', intersect: false },
        scales: {
          x: { type: 'time', time: { unit: 'day' }, grid: { display: false }, ticks: { color: '#9CA3AF', maxRotation: 0 } },
          y: { grid: { color: '#F3F4F6' }, ticks: { color: '#9CA3AF', callback: v => '$' + v.toFixed(0) } }
        },
        plugins: {
          legend: { display: false },
          tooltip: { callbacks: { label: ctx => '$' + ctx.parsed.y.toFixed(2) } }
        }
      }
    });

    // Range buttons
    document.querySelectorAll('.chart-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.chart-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const range = btn.dataset.range;
        priceChart.data.datasets[0].data = chartData[range];
        priceChart.update();
      });
    });

    // ===== TABS =====
    els.buyTab.onclick = () => {
      els.buyTab.classList.add('active'); els.sellTab.classList.remove('active');
      els.buyPanel.style.display = 'block'; els.sellPanel.style.display = 'none';
    };
    els.sellTab.onclick = () => {
      els.sellTab.classList.add('active'); els.buyTab.classList.remove('active');
      els.sellPanel.style.display = 'block'; els.buyPanel.style.display = 'none';
    };

    // ===== CALCULATIONS =====
    function refreshPrices() {
      els.pricePerToken.textContent = `$${state.tokenPrice.toFixed(2)} / NVDAon`;
      els.pricePerTokenSell.textContent = `$${state.tokenPrice.toFixed(2)} / NVDAon`;
    }
    refreshPrices();

    els.payAmount.oninput = (e) => {
      const usd = parseFloat(e.target.value) || 0;
      els.receiveAmount.value = usd > 0 ? (usd / state.tokenPrice).toFixed(4) : '';
    };
    els.sellAmount.oninput = (e) => {
      const tokens = parseFloat(e.target.value) || 0;
      els.sellReceiveAmount.value = tokens > 0 ? (tokens * state.tokenPrice).toFixed(2) : '';
    };

    // ===== WALLET =====
    els.walletBtn.onclick = () => {
      if (!state.connected) {
        state.connected = true;
        els.walletBtn.textContent = '0x1234...5678';
        els.walletBtn.classList.add('connected');
        els.buyBtn.textContent = 'BUY NVDAON';
        els.buyBtn.disabled = false;
        els.sellBtn.textContent = 'SELL NVDAON';
        els.sellBtn.disabled = false;
      }
    };

    // ===== BUTTON ACTIONS (DEMO) =====
    els.buyBtn && (els.buyBtn.onclick = () => {
      if (!state.connected) return;
      const amount = parseFloat(els.payAmount.value) || 0;
      if (amount <= 0) { alert('Please enter a valid amount'); return; }
      alert(`‚úÖ Successfully bought ${(amount / state.tokenPrice).toFixed(4)} NVDAon for $${amount.toFixed(2)}`);
      els.payAmount.value = ''; els.receiveAmount.value = '';
    });

    els.sellBtn && (els.sellBtn.onclick = () => {
      if (!state.connected) return;
      const tokens = parseFloat(els.sellAmount.value) || 0;
      if (tokens <= 0) { alert('Please enter a valid amount'); return; }
      alert(`‚úÖ Successfully sold ${tokens.toFixed(4)} NVDAon for $${(tokens * state.tokenPrice).toFixed(2)}`);
      els.sellAmount.value = ''; els.sellReceiveAmount.value = '';
    });

    // ===== MOBILE REPOSITION: place trading widget above chart on small screens =====
    (function setupTradeRelocator() {
      const BREAKPOINT = 1200; // keep in sync with CSS
      const tradingPane = document.querySelector('.trading-pane');
      const tradingWidget = document.getElementById('tradingWidget');
      const mobileSlot = document.getElementById('mobileTradeSlot');

      // Create a desktop slot marker right after the widget
      const desktopSlot = document.createElement('div');
      desktopSlot.id = 'desktopTradeSlot';
      tradingWidget.after(desktopSlot);

      function placeTrade() {
        const isMobile = window.matchMedia(`(max-width: ${BREAKPOINT}px)`).matches;

        if (isMobile) {
          if (tradingWidget.parentNode !== mobileSlot) {
            mobileSlot.appendChild(tradingWidget);
            document.body.classList.add('trade-moved');
          }
        } else {
          if (tradingWidget.parentNode !== tradingPane) {
            // Reinsert before the marker
            desktopSlot.parentNode.insertBefore(tradingWidget, desktopSlot);
            document.body.classList.remove('trade-moved');
          }
        }
      }

      // Initial placement and listeners
      placeTrade();
      window.addEventListener('resize', placeTrade);
      window.addEventListener('orientationchange', placeTrade);
    })();
  </script>
</body>
</html>